<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Todo List</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üìù</text></svg>">
    <link rel="stylesheet" href="style.css">
    <!-- Supabase JavaScript Client -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <!-- Supabase Configuration -->
    <script src="config.js"></script>
</head>
<body>
    <div class="container">
        <header>
            <h1>My Todo List</h1>
        </header>
        
        <main>
            <section class="input-section">
                <form id="todo-form" role="form" aria-label="Add new task">
                    <div class="input-group">
                        <input 
                            type="text" 
                            id="task-input" 
                            placeholder="Enter a new task..." 
                            aria-label="New task description"
                            maxlength="200"
                            required
                        >
                        <button type="submit" id="add-btn" aria-label="Add task">
                            Add Task
                        </button>
                    </div>
                </form>
            </section>

            <section class="filter-section">
                <div class="filter-buttons" role="group" aria-label="Filter tasks">
                    <button class="filter-btn active" data-filter="all" aria-label="Show all tasks">
                        All <span class="count" id="all-count">0</span>
                    </button>
                    <button class="filter-btn" data-filter="active" aria-label="Show active tasks">
                        Active <span class="count" id="active-count">0</span>
                    </button>
                    <button class="filter-btn" data-filter="completed" aria-label="Show completed tasks">
                        Completed <span class="count" id="completed-count">0</span>
                    </button>
                </div>
            </section>

            <section class="tasks-section">
                <div class="task-stats" id="task-stats" aria-live="polite">
                    <span id="stats-text">No tasks yet</span>
                </div>
                
                <!-- Loading indicator -->
                <div class="loading-indicator" id="loading-indicator">
                    <div class="spinner"></div>
                    <p>Loading your tasks...</p>
                </div>
                
                <!-- Error state -->
                <div class="error-state" id="error-state" style="display: none;">
                    <div class="error-content">
                        <p>‚ö†Ô∏è Unable to connect to the server</p>
                        <button class="retry-btn" id="retry-btn">Try Again</button>
                    </div>
                </div>
                
                <ul class="task-list" id="task-list" role="list" aria-label="Task list">
                    <!-- Tasks will be dynamically inserted here -->
                </ul>
                
                <div class="empty-state" id="empty-state">
                    <p>üéØ No tasks yet! Add one above to get started.</p>
                </div>
                
                <div class="bulk-actions" id="bulk-actions">
                    <button class="clear-completed-btn" id="clear-completed" aria-label="Clear all completed tasks">
                        Clear Completed
                    </button>
                </div>
            </section>
        </main>
    </div>

    <!-- Task template for JavaScript -->
    <template id="task-template">
        <li class="task-item" role="listitem">
            <div class="task-content">
                <input type="checkbox" class="task-checkbox" aria-label="Mark task as complete">
                <span class="task-text" tabindex="0" role="button" aria-label="Click to edit task"></span>
                <div class="task-actions">
                    <button class="edit-btn" aria-label="Edit task" title="Edit">
                        ‚úèÔ∏è
                    </button>
                    <button class="delete-btn" aria-label="Delete task" title="Delete">
                        üóëÔ∏è
                    </button>
                </div>
            </div>
            <div class="task-meta">
                <small class="task-date"></small>
            </div>
        </li>
    </template>

    <script src="script.js"></script>
</body>
</html>
